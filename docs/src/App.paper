<template>
    <header>
        <span>image3D</span>
        <nav>
            <span @click='loadpage("api","no")' :active='url=="api"?"yes":"no"'>
                ÊñáÊ°£
            </span>
            <span @click='loadpage("course","no")' :active='url=="course"?"yes":"no"'>
                ÊïôÁ®ã
            </span>
            <span>
                <a href="#/opengl-es" class='link' target="_blank" title="ÁùÄËâ≤Âô®ËØ≠Ë®ÄÔºå‰∏âÁª¥Ê∏≤ÊüìÁöÑÂÖ≥ÈîÆÊäÄÊúØ">
                    OpenGL ES
                </a>
            </span>
            <span>
                <a href="./review/index.html" class='link' target="_blank">
                    Áî®‰æã
                </a>
            </span>
            <!-- <span>
                <a href="https://hai2007.github.io/model-editor/" class='good-link model-editor' target="_blank">
                    3DÊ®°ÂûãÁºñËæëÂô®
                </a>
            </span> -->
            <span class='select'>
                <i>
                    Êõ¥Â§öÂÜÖÂÆπ
                </i>
                <div>
                    <a href="https://hai2007.github.io/model-editor/" title='‰∏Ä‰∏™ÁºñËæëÊàñËÄÖÈ¢ÑËßàÊ®°ÂûãÊï∞ÊçÆÁöÑËΩØ‰ª∂'
                        target="_blank">3DÊ®°ÂûãÁºñËæëÂô®</a>
                    <h2>
                        ‰∫§ÊµÅ
                    </h2>
                    <a href="https://github.com/hai2007/image3D/issues" title='‰ªª‰ΩïÁñëÊÉëÈÉΩÂèØ‰ª•Âú®ËøôÈáåÊèêÈóÆ' target="_blank">ÂèÇ‰∏éËÆ®ËÆ∫</a>
                    <a href="https://clunch-contrib.github.io/community/" title='‰Ω†ÂèØ‰ª•Ëé∑ÂæóÊõ¥Â§öÂÖ≥‰∫éÁªòÂõæÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØ'
                        target="_blank">ÂºÄÂèëËÄÖÁ§æÂå∫</a>
                    <h2>
                        Áõ∏ÂÖ≥È°πÁõÆ
                    </h2>
                    <a href="https://github.com/clunch-contrib/Three-Geometry" title="‰∏∫image3D.jsËÆæËÆ°ÂºÄÂèëÁöÑ‰∏âÁª¥Âá†‰ΩïÂùêÊ†áËøêÁÆóÂ∫ì "
                        target="_blank">
                        Three-Geometry
                    </a>
                    <a href="https://hai2007.gitee.io/clunch/" title='üé® Ê∏êËøõÁöÑÂâçÁ´Ø‰∫§‰∫íÂºèÂõæÂΩ¢Ê°ÜÊû∂' target="_blank">clunch.js</a>
                    <a href="https://hai2007.gitee.io/image2d/"
                        title='üíØ üçá üå¥üí™ ‰ΩøÁî®ECMAScriptÁªòÂà∂‰∫åÁª¥ÂõæÁâá„ÄÇüìäüìàüéâDrawing Two-Dimensional Pictures Using ECMAScript.üö® üôå'
                        target="_blank">image2D.js</a>
                    <a href="https://hai2007.github.io/cross-end-canvas/"
                        title='ü¶é üé® Êèê‰æõË∑®Á´ØÁöÑcanvasÁîªÁ¨îÔºå‰øùÊåÅ‰∏ÄËá¥ÁöÑÁªòÂõæÊñπÊ≥ïÂíåÊïàÊûúÔºåÂåÖÊã¨ÊôÆÈÄöÁöÑwebÁ´Ø„ÄÅuniappÊ°ÜÊû∂„ÄÅÂæÆ‰ø°Â∞èÁ®ãÂ∫èÁ≠âÂ∞èÁ®ãÂ∫èÁ≠â„ÄÇ' target="_blank">Cross
                        End Canvas</a>
                    <a href="https://hai2007.github.io/puly/"
                        title='üé® üçä ‰∏Ä‰∏™ÁÆÄÂçïÊòìÁî®ÁöÑ3DÂõæË°®ÔºåÂÉèECharts‰∏ÄÊ†∑ÂèØ‰ª•Âø´ÈÄü‰∏äÊâãÔºåÈÖçÁΩÆÂåñÁîüÊàêÔºåÂπ∂ÊîØÊåÅ‰∏™ÊÄßÂåñËá™ÂÆö‰πâÊâ©Â±ï„ÄÇ' target="_blank">puly.js</a>
                    <h2>
                        Â∫ïÂ±Ç‰æùËµñ
                    </h2>
                    <a href="https://hai2007.github.io/algorithm.js/" title="üî™ ‰∏Ä‰∫õÂâçÁ´ØÂ∏∏Áî®ÁöÑÁÆóÊ≥ïÂÆûÁé∞ÂêàÈõÜ„ÄÇ" target="_blank">
                        @hai2007/algorithm
                    </a>
                    <a href="https://hai2007.github.io/tool.js/" title="üí° ÂâçÁ´ØÂ∏∏Áî®ÁöÑÂ∑•ÂÖ∑Á±ªÊñπÊ≥ïÊ±áÊÄª„ÄÇ" target="_blank">
                        @hai2007/tool
                    </a>
                </div>
            </span>
            <span>
                <a href="https://github.com/hai2007/image3D" class='github' target="_blank">GitHub</a>
            </span>
            <span class="editor" @click="openEdit()" title="ÂèëÁé∞ÈîôËØØÔºüÊÉ≥ÂèÇ‰∏éÁºñËæëÔºü Âú® GitHub ‰∏äÁºñËæëÊ≠§È°µÔºÅ">ÁºñËæë</span>
            <ui-search></ui-search>
            <span>
                <a href="https://hai2007.gitee.io/sweethome/#/Sponsors" class='link' target="_blank">ÊîØÊåÅÊàë‰ª¨</a>
            </span>
        </nav>
    </header>
    <div class='content'>
        <component :is='page'></component>
    </div>
    <ui-footer></ui-footer>
</template>
<script>

    let pages = {
        api: () => import('./pages/api.paper'),
        course: () => import('./pages/course.paper')
    };

    export default {
        data() {
            return {
                page: null,
                url: ""
            };
        },
        mounted() {
            let routers = this.urlFormat(window.location.href).router;
            this.loadpage(routers[0] in pages ? routers[0] : "api");

        },
        methods: {
            loadpage(url, flag) {
                pages[url]().then(data => {
                    if (flag == 'no') window.location.href = "#/" + url;
                    this.url = url;
                    this.page = data.default;
                });
            },
            openEdit() {

                let fileurl;

                try {
                    fileurl = window.location.href.split("#")[1].replace(/\/$/, "").replace(/\?.{0,}$/, '').replace(/^\//, "");
                } catch (e) {
                    fileurl = 'api';
                }

                window.location.href =
                    "https://github.com/hai2007/image3D/edit/dev/docs/src/pages/" +
                    fileurl +
                    ".paper";
            }
        }
    };
</script>
<style lang="scss">
    [quickpaper] {
        &>header {
            background-color: #fff;
            border-bottom: 1px solid #eaecef;
            height: 60px;
            line-height: 40px;
            padding-left: 80px;
            padding-right: 0;
            background-image: url('./images/logo.png');
            background-size: auto 70%;
            background-position: 20px center;
            background-repeat: no-repeat;
            white-space: nowrap;
            box-shadow: 0px 1px 9px 2px #efebea;

            &>span {
                font-family: cursive;
                font-size: 20px;
                font-weight: 800;
                color: #b25932;
                line-height: 60px;
            }

            &>nav {
                position: absolute;
                right: 30px;
                top: 10px;
                z-index: 2;

                &>span {
                    margin-right: 10px;
                    font-size: 14px;
                    cursor: pointer;
                    padding: 0 5px;
                    display: inline-block;
                    vertical-align: top;

                    &.editor {
                        background-image: url('./images/edit.png');
                        font-size: 0;
                        width: 44px;
                        background-size: 100% auto;
                        background-repeat: no-repeat;
                        background-position: center;
                    }

                    &.select {
                        margin-right: 20px;
                        white-space: nowrap;

                        &>i {
                            &::after {
                                display: inline-block;
                                vertical-align: middle;
                                margin-top: -1px;
                                margin-left: 6px;
                                margin-right: -14px;
                                width: 0;
                                height: 0;
                                border-left: 4px solid transparent;
                                border-right: 4px solid transparent;
                                border-top: 5px solid #4f5959;
                                content: " ";
                            }

                            font-style:normal;
                        }

                        &:hover {
                            &>div {
                                display: block;
                            }
                        }

                        position: relative;

                        &>div {
                            display: none;
                            position: absolute;
                            box-shadow: 1px 1px 6px 0px #858889;
                            padding: 10px 20px;
                            top: 36px;
                            right: -20px;
                            background-color: white;
                            line-height: 2em;
                            cursor: default;

                            &>a {
                                display: block;
                                color: black;
                                font-weight: 200;

                                &:hover {
                                    text-decoration: underline;
                                }

                            }

                            &>h2 {
                                font-size: 14px;
                                margin-top: 10px;
                            }
                        }
                    }

                    &>a {
                        position: relative;
                        color: black;
                        font-size: 14px;
                        font-weight: 400;

                        &.link {
                            margin-right: 10px;

                            &:hover {
                                font-weight: 800;
                                text-decoration: underline;
                            }

                            &::after {
                                position: absolute;
                                background-image: url('./images/link.png');
                                background-repeat: no-repeat;
                                content: " ";
                                display: inline-block;
                                width: 11px;
                                height: 11px;
                                top: 4px;
                                right: -16px;
                            }
                        }

                        &.good-link {
                            &.model-editor {
                                background-image: url('./images/model-editor.png');
                            }

                            &.three {
                                background-image: url('./images/how.png');
                            }

                            background-repeat: no-repeat;
                            background-position: center 3px;
                            background-size: auto 28px;
                            height: 50px;
                            display: inline-block;
                            padding: 0 5px;
                            padding-top: 10px;
                            background-color: #efebea;
                            vertical-align: top;
                            font-size: 12px;
                            color: #b75932;
                            margin-top: 5px;
                            font-weight: 200;
                            border-radius: 5px;

                            &:hover {
                                text-decoration: underline;
                            }
                        }

                        &.github {
                            width: 100px;
                            height: 100%;
                            display: inline-block;
                            background-size: 100% auto;
                            font-size: 0;
                            background-repeat: no-repeat;
                            vertical-align: top;
                            background-position: center;
                            background-image: url('./images/github.png');
                        }

                    }

                    &[active='yes'] {
                        border-bottom: 2px solid red;
                        font-weight: 800;
                    }

                    &:hover {
                        font-weight: 800;
                    }
                }
            }
        }
    }
</style>
